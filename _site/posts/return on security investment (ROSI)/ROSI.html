<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Johannes Buck">
<meta name="dcterms.date" content="2024-01-31">
<meta name="description" content="Return on Security Investment (ROSI) is used to measure the effectiveness of security investments.">

<title>β Blog - Return on Security Investment (ROSI)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/beta_blog_icon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">β Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/j-buck59/" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:johannes.buck59@gmail.com" rel="" target=""><i class="bi bi-envelope" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Return on Security Investment (ROSI)</h1>
                  <div>
        <div class="description">
          Return on Security Investment (ROSI) is used to measure the effectiveness of security investments.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">statistics</div>
                <div class="quarto-category">risk management</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Johannes Buck </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 31, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#return-on-security-investment-rosi" id="toc-return-on-security-investment-rosi" class="nav-link active" data-scroll-target="#return-on-security-investment-rosi">Return on Security Investment (ROSI)</a>
  <ul class="collapse">
  <li><a href="#roi-vs.-rosi" id="toc-roi-vs.-rosi" class="nav-link" data-scroll-target="#roi-vs.-rosi">ROI vs.&nbsp;ROSI</a></li>
  <li><a href="#limitations-of-rosi" id="toc-limitations-of-rosi" class="nav-link" data-scroll-target="#limitations-of-rosi">Limitations of ROSI</a></li>
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples">Examples</a></li>
  <li><a href="#alternative-methods" id="toc-alternative-methods" class="nav-link" data-scroll-target="#alternative-methods">Alternative methods</a>
  <ul class="collapse">
  <li><a href="#balanced-scorecard-bsc" id="toc-balanced-scorecard-bsc" class="nav-link" data-scroll-target="#balanced-scorecard-bsc">Balanced scorecard (BSC)</a></li>
  <li><a href="#net-present-value-npv" id="toc-net-present-value-npv" class="nav-link" data-scroll-target="#net-present-value-npv">Net present value (NPV)</a></li>
  <li><a href="#gordon-loebs-method" id="toc-gordon-loebs-method" class="nav-link" data-scroll-target="#gordon-loebs-method">Gordon Loeb’s Method</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="return-on-security-investment-rosi" class="level1">
<h1>Return on Security Investment (ROSI)</h1>
<p>Return on Security Investment (ROSI) is used to measure the effectiveness of security investments.</p>
<p>ROSI is the ratio of the monetary benefit of a security investment to its cost. A positive ROSI indicates that the investment has generated a positive net return, while a negative ROSI indicates that the investment has resulted in a net loss.</p>
<p>ROSI can help organizations determine which security investments are worth the cost and which are not and, allocate resources to effective security solutions.</p>
<p><img src="images/Balance between costs, agility, innovation and risk.png" class="img-fluid"></p>
<p><em>Figure 1: Balance between costs, agility/innovation and risk</em></p>
<section id="roi-vs.-rosi" class="level2">
<h2 class="anchored" data-anchor-id="roi-vs.-rosi">ROI vs.&nbsp;ROSI</h2>
<p>The return on investment (ROI) equation only works for investments that produce positive results, such as cost savings or increased revenue. Cyber security spending does not increase revenue, nor does it provide a payback. Rather, it is risk management that contributes to loss prevention and risk mitigation. The ROSI therefore aims to calculate how much loss an organization can avoid by investing in its security. The formula for this is therefore different from the ROI calculation.</p>
<p><span class="math display">\[ROI = \frac{Return}{Investment}\]</span></p>
<p><span class="math display">\[ROSI = \frac{\text{Financial Loss Reduction - Cost of Security Solution}}{\text{Cost of Security Solution}}\]</span></p>
<p>Implementing a security solution reduces the ALE expressed by the mitigation ratio.</p>
<p><span class="math display">\[ROSI = \frac{\text{ALE * Mitigation Ratio - Cost of Security Solution}}{\text{Cost of Security Solution}}\]</span></p>
<p>Where:</p>
<ul>
<li><p><strong>Single Loss Expectancy (SLE):</strong> expected financial loss when a risk occurs</p></li>
<li><p><strong>Annual Rate of Occurrence (ARO):</strong> probability that a risk occurs in a year</p></li>
<li><p><strong>Annualized Loss Expectancy (ALE):</strong> total financial loss per year resulting from a specific risks <span class="math display">\[ALE = SLE * ARO\]</span></p></li>
</ul>
<p><strong>Process steps of ROSI calculation</strong></p>
<ol type="1">
<li><p>Determine the cost of security solution</p></li>
<li><p>Estimate the single loss expectancy (SLE)</p></li>
<li><p>Estimate the annual rate of occurrence (ARO)</p></li>
<li><p>Calculate the financial loss reduction based on ALE and mitigation ratio</p></li>
<li><p>Calculate the ROSI value</p></li>
</ol>
</section>
<section id="limitations-of-rosi" class="level2">
<h2 class="anchored" data-anchor-id="limitations-of-rosi">Limitations of ROSI</h2>
<ul>
<li>Estimating both single loss expectancy (SLE) and annual occurrence rate (ARO) is challenging and often subject to bias.</li>
<li>Calculating the cost of a security solution requires a solid understanding of the one-time cost of implementation and the recurring cost of operation.</li>
<li>ROSI does not support multi-year budget view.</li>
<li>ROSI considers only the financial aspects of risk mitigation. In practice, other factors such as reputation damage are also relevant.</li>
</ul>
</section>
<section id="examples" class="level2">
<h2 class="anchored" data-anchor-id="examples">Examples</h2>
<p><strong>Example 1</strong></p>
<p>A company is considering investing in an anti-malware solution. Each year, the company suffers 5 malware attacks (ARO=5). The CISO estimates that each attacks cost approximately USD 15,000 in loss of data and productivity (SLE=15,000). The anti-malware solution is expected to block 80% of the malware attacks (Mitigation ratio=80%) and costs USD 25,000 per year (license fees USD 15,000 + USD 10,000 for operations). The return on security investment (ROSI) for this solution is then calculated as follow:</p>
<p><span class="math display">\[ROSI = \frac{(5 * 15,000)*0.8-25,000}{25,000}= 1.4\]</span></p>
<p>Conclusion The investment in the anti-malware solution will save the company USD 35,000 per year, which corresponds to an amortization of 140%. The ROSI calculation shows that the anti-malware solution is a cost-effective solution.</p>
<p><strong>Example 2</strong></p>
<p>A company has 500 employees. They all have use notebooks for their daily work. The company protects the notebooks with an end-point security solution.</p>
<p>Assumptions</p>
<ul>
<li><p>The number of notebooks infected with malware per year is 6%, or 30 notebooks.</p></li>
<li><p>Financial loss due to malware infection is 30 * USD 10,000 = USD 300,000</p></li>
<li><p>The end-point security software prevents from 80% of the malware attacks</p></li>
<li><p>One-time license cost for end-point security software is 500 * USD 110 = USD 55,000</p></li>
<li><p>Annual operating cost is USD 10,000</p></li>
</ul>
<p>Where:</p>
<ul>
<li><p><strong>Single Loss Expectancy (SLE):</strong> USD 10,000</p></li>
<li><p><strong>Annual Rate of Occurrence (ARO):</strong> 6%</p></li>
<li><p><strong>Annualized Loss Expectancy (ALE):</strong> <span class="math inline">\(ALE = SLE * ARO = \text{USD 300,000}\)</span></p></li>
<li><p><strong>Cost of Security Solution:</strong> USD 55,000 + USD 10,000 = USD 65,000</p></li>
<li><p><strong>Mitigation Ratio:</strong> 80%</p></li>
</ul>
<p><span class="math display">\[ROSI = \frac{\text{ALE * Mitigation Ratio - Cost of Security Solution}}{\text{Cost of Security Solution}}\]</span></p>
<p><span class="math display">\[ROSI = \frac{\text{USD 300,000 * 0.8} - \text{USD 65,000}}{\text{USD 65.000}} = 2.69\]</span></p>
<p>Conclusion</p>
<p>The investment in the end-point security solution will save the company USD 174,850 per year, which corresponds to an amortization of 269%. The ROSI calculation shows that the end-point protection is a cost-effective solution.</p>
</section>
<section id="alternative-methods" class="level2">
<h2 class="anchored" data-anchor-id="alternative-methods">Alternative methods</h2>
<section id="balanced-scorecard-bsc" class="level3">
<h3 class="anchored" data-anchor-id="balanced-scorecard-bsc">Balanced scorecard (BSC)</h3>
<p>The balanced scorecard is a method that considers multiple perspectives, such as financial, customer, internal process, and learning and growth for strategic management. The balanced scorecard can help organizations to align their security investments with their overall business strategy.</p>
<p>Key performance indicators (KPI) are can be used to measure the effectiveness of each perspective. ROSI can be used as key performance indicators (KPI) to measure the financial effectiveness (i.e., contribution to the overall business strategy) of security investments.</p>
<p><strong>Example</strong></p>
<p>Suppose an organization uses a balanced scorecard to evaluate the effectiveness of its email security investment using the following key performance indicators (KPI):</p>
<ul>
<li><p><strong>Financial perspective:</strong> ROSI of email security solution</p></li>
<li><p><strong>Customer perspective:</strong> Customer satisfaction with email security measures</p></li>
<li><p><strong>Internal process perspective:</strong> Time to detect and respond to email security incidents</p></li>
<li><p><strong>Learning and growth perspective:</strong> Employees participation in training and awareness of email security best practices</p></li>
</ul>
<p>These KPI provide a comprehensive view of the effectiveness of the email security investment, and can help the organization to identify areas for improvement and optimize its security strategy over time. The balanced scorecard method is a valuable extension of the ROSI calculation, providing a holistic view at the strategic level.</p>
</section>
<section id="net-present-value-npv" class="level3">
<h3 class="anchored" data-anchor-id="net-present-value-npv">Net present value (NPV)</h3>
<p>The Net Present Value (NPV) calculates the present value of the net benefits of an investment over time. NPV takes into account the time value of money and the changing benefits and costs of a security investment over time. <span class="math display">\[NPV = \sum_{t=0}^{T} \frac{CF_t}{(1+r)^t} - C_0\]</span> Where:</p>
<ul>
<li><p><span class="math inline">\(NPV\)</span> is the Net Present Value</p></li>
<li><p><span class="math inline">\(T\)</span> is the number of periods (usually years)</p></li>
<li><p><span class="math inline">\(CF_t\)</span> is the net cash flow during the period ( t )</p></li>
<li><p><span class="math inline">\(r\)</span> is the discount rate (the rate of return required by the investor)</p></li>
<li><p><span class="math inline">\(C_0\)</span> is the initial investment cost</p></li>
</ul>
<p>If the NPV is positive, it suggests that the investment is expected to generate more cash inflows than outflows, indicating a potentially profitable opportunity. Conversely, if the NPV is negative, it suggests that the investment may not meet the required rate of return and may not be economically viable.</p>
<p>Conclusion</p>
<ul>
<li><p>NPV provides a time-based analysis of the profitability of an investment.</p></li>
<li><p>ROSI is a simple ratio and does not consider the timing of cash flows or the cost of capital.</p></li>
<li><p>Security investments do not generate revenue or losses. They prevent from losses. Therefore, the NPV method cannot be applied to security investments.</p></li>
</ul>
</section>
<section id="gordon-loebs-method" class="level3">
<h3 class="anchored" data-anchor-id="gordon-loebs-method">Gordon Loeb’s Method</h3>
<p>The Gordon-Loeb method is a mathematical economic model used to determine the optimal level of investment in information security.</p>
<p>The basic components of the Gordon-Loeb model are as follows:</p>
<ol type="1">
<li><p>Assets that are vulnerable to cyber attacks. This vulnerability <span class="math inline">\(v\)</span> (0 ≤ <em>v</em> ≤ 1) corresponds to the probability of a successful cyber attack.</p></li>
<li><p>The potential loss is denoted as&nbsp;<span class="math inline">\(L\)</span>. Thus,&nbsp;<span class="math inline">\(vL\)</span>&nbsp;is the expected loss prior to an investment in additional cyber security measures.</p></li>
<li><p>The cyber security investment&nbsp;<span class="math inline">\(z\)</span>, will reduce&nbsp;<span class="math inline">\(v\)</span>. <span class="math display">\[z(v) ≤ \frac{1}{e} vL\]</span></p></li>
</ol>
<p>Gordon and Loeb were able to show that the optimal level of cyber security investments would not exceed <span class="math inline">\(\frac{vL}{e}\)</span> or approx. 37% of the expected loss from a security attack (<span class="math inline">\(vL\)</span>).</p>
<p><img src="images/Gordon-Loeb Model.png" class="img-fluid"></p>
<p><em>Figure 2: The optimal level of cyber security investment at</em> <span class="math inline">\(z^*\)</span></p>
<p><strong>Example</strong></p>
<p>Suppose an estimated data value of&nbsp; USD 1,000,000, with a cyber attack probability of&nbsp;15%, and an&nbsp;80%&nbsp;chance that an attack would be successful.</p>
<p>In this case, the potential loss is given by the product&nbsp;USD 1,000,000&nbsp; × &nbsp;0.15&nbsp; × &nbsp;0.8 = USD 120,000.</p>
<p>According to Gordon and Loeb, the company’s investment in security should not exceed&nbsp;USD 120,000&nbsp; × &nbsp;0.37 = USD 44,000.</p>
<p><strong>Limitations of the Gordon-Loeb model</strong></p>
<p>While the Gordon-Loeb model is a valuable contribution to the field of cyber security economics, it is important to understand its limitations.</p>
<ol type="1">
<li><p><strong>Simplifying assumptions:</strong> The model relies on simplifying assumptions, such as the linearity of the relationship between investment and risk reduction. The optimum of security investments is determined by the mathematical derivative of the investment function. In reality, the relationship may be more complex and context-dependent.</p></li>
<li><p><strong>Risk appetite and industry differences:</strong> Organizations vary in their risk appetite, and different industries may have distinct risk profiles. What is an appropriate investment level for one organization or industry may not be suitable for another. Factors such as legal and regulatory requirements and the organization’s risk appetite need to be considered.</p></li>
<li><p><strong>Dynamic nature of cyber threats:</strong> Cyber threats evolve rapidly, and the threat landscape is dynamic. The model assumes a static environment, which may not capture the changing nature of cyber risks. Organizations need to adapt their security investments to address emerging threats.</p></li>
<li><p><strong>Incomplete information:</strong> Calculating the expected loss is challenging, as it requires accurate data on potential losses from security incidents. In practice, organizations may face difficulties in obtaining comprehensive and reliable data for such calculations.</p></li>
<li><p><strong>Beyond financial considerations:</strong> The model primarily focuses on financial aspects and may not fully capture non-financial factors, such as reputational damage, and customer trust.</p></li>
</ol>
<p>The limitations of points 3, 4, and 5 apply not only to the Gordon-Loeb model, but also to ROSI. The Gordon-Loeb model can be used as a starting point rather than a universal rule.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Dependence on mathematical approach</p>
<p>Research showed that even within the initial assumptions of the model, some security incident probability functions should be fixed with no less than&nbsp;<span class="math inline">\(\frac{1}{2}\)</span>&nbsp;the expected loss, contradicting the hypothesis that the <span class="math inline">\(\frac{1}{e}\)</span>&nbsp;factor was universal. Using a different mathematical approach (the second derivative of the loss function need not to be continuous), one can create loss functions whose optimal fixing costs 100% of the estimated loss.</p>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="viper-007/Beta-Blog" data-repo-id="R_kgDOJqefag" data-category="General" data-category-id="DIC_kwDOJqefas4CW6NB" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Made with <a href="https://quarto.org/">Quarto</a> by Johannes Buck. License: <a href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a>.</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>